@inject IJSRuntime JSInterop
@inject NavigationManager NavigationManager
@using PRIORI_SERVICES_WEB.Data

<style>
    .hover-underline-animation {
        display: inline-block;
        position: relative;
        color: #ffffff;
    }

    .hover-underline-animation::after {
        content: '';
        position: absolute;
        width: 100%;
        transform: scaleX(0);
        height: 2px;
        bottom: 0;
        left: 0;
        background-color: #ffffff;
        transform-origin: bottom right;
        transition: transform 0.25s ease-out;
    }

    .hover-underline-animation:hover::after {
        transform: scaleX(1);
        transform-origin: bottom left;
    }

    .margem {
        padding-right: 0.5rem;
    }

    .margem2 {
        margin-right: 1.5rem;
        margin-left: 0.1rem;
    }

    .margem3 {
        margin-left: 1.5rem;
    }

    .fonte-nav-lista {
        font-size: 15px;
        font-family: "Poppins", sans-serif;
        margin: 0;
        padding: 0;
        line-height: 1;
        font-weight: 400;
        letter-spacing: 2px;
        text-transform: uppercase;
    }

    .fonte-titulo {
        font-family: "Poppins", sans-serif;
        line-height: 1;
        font-weight: 400;
        letter-spacing: 2px;
        text-transform: uppercase;
    }
</style>

<nav class="navbar navbar-expand text-white bg-dark d-flex flex-row @nav_classes"
    style="background-image: linear-gradient(75deg, rgb(211, 35, 218), rgb(114, 0, 167)); @nav_style">
    <div class="container-fluid text-nowrap text-decoration-none text-white m-1-15">
        <NavLink href="/" class="text-white fonte-titulo fs-3"
            style="font-family: Poppins, sans-serif; text-decoration: none">
            <img src="assets/Logo_Priori_Services.png" alt="Logo Priori Services" class="navbar-brand img-fluid"
                width="65em" height="60em" />
            PRIORI
            SERVICES
        </NavLink>
    </div>

    <div class="container-fluid text-nowrap">
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav fonte-nav-lista">
                @foreach (KeyValuePair<string, string> route in paginas_sistema)
                {
                    <li class="nav-item d-flex flex-row me-3 justify-content-center hover-underline-animation">
                        <NavLink href="@route.Key" class="nav-link text-white text-nowrap">
                            @route.Value
                        </NavLink>
                    </li>
                }
            </ul>
        </div>

        <button @onclick="AreaRedirect" class="text-center btn btn-outline-light px-3 py-2 fs-5">
            <i class="bi bi-lock"></i>
            Área do Usuário
        </button>
    </div>
</nav>

@code {

    private Dictionary<string, string> paginas_sistema =
    new Dictionary<string, string> {
{"/blog","Blog"},
{"/simulador","Simulador"},
{"/investimentos-disponiveis", "Investimentos"},
{"/contato","Contato"}
        };

    public async Task AreaRedirect()
    {
        var app_key = await JSInterop.InvokeAsync<string?>(
        "localStorage.getItem",
        LocalStorageTypes.app_token
        );

        NavigationManager.NavigateTo(
        (app_key == String.Empty || app_key == "" || app_key == null)
        ? "/login"
        : "/areausuario"
        );
    }

    [Parameter]
    public string nav_classes { get; set; } = "";

    [Parameter]
    public string nav_style { get; set; } = "";
}
